# Convert 4x6 font to Adafruit GFX format
# (c) 2025 Honza Sk√Ωpala
# Glyphs inspired by 4x6 font by fiftyclick, https://fontstruct.com/fontstructions/show/1650758/4x6-font
# WTFPL license applies

import sys

def eprint(*args, **kwargs):
    print(*args, file=sys.stderr, **kwargs)

WIDTH = 3
HEIGHT = 5
FIRST_CHAR = 32
OLDFONT = bytes((
    2, 0x00, 0x00, 0x00, # 32 ' '
    1, 0x17, 0x00, 0x00, # 33 '!'
    3, 0x03, 0x00, 0x03, # 34 '"'
    3, 0x1F, 0x0A, 0x1F, # 35 '#'
    3, 0x16, 0x1F, 0x1A, # 36 '$'
    3, 0x09, 0x04, 0x12, # 37 '%'
    3, 0x1B, 0x15, 0x1C, # 38 '&'
    1, 0x03, 0x00, 0x00, # 39 '''
    2, 0x0E, 0x11, 0x00, # 40 '('
    2, 0x11, 0x0E, 0x00, # 41 ')'
    3, 0x0A, 0x04, 0x0A, # 42 '*'
    3, 0x04, 0x0E, 0x04, # 43 '+'
    3, 0x10, 0x18, 0x00, # 44 ','
    2, 0x04, 0x04, 0x00, # 45 '-'
    1, 0x10, 0x00, 0x00, # 46 '.'
    3, 0x10, 0x0C, 0x03, # 47 '/'
    3, 0x1E, 0x11, 0x0F, # 48 '0'
    3, 0x12, 0x1F, 0x10, # 49 '1'
    3, 0x19, 0x15, 0x12, # 50 '2'
    3, 0x11, 0x15, 0x0A, # 51 '3'
    3, 0x0C, 0x0A, 0x1F, # 52 '4'
    3, 0x17, 0x15, 0x09, # 53 '5'
    3, 0x1E, 0x15, 0x0D, # 54 '6'
    3, 0x11, 0x0D, 0x03, # 55 '7'
    3, 0x1A, 0x15, 0x1B, # 56 '8'
    3, 0x06, 0x05, 0x1F, # 57 '9'
    1, 0x0A, 0x00, 0x00, # 58 ':'
    2, 0x10, 0x1A, 0x00, # 59 ';'
    2, 0x04, 0x0A, 0x00, # 60 '<'
    2, 0x0A, 0x0A, 0x00, # 61 '='
    2, 0x0A, 0x04, 0x00, # 62 '>'
    3, 0x01, 0x15, 0x02, # 63 '?'
    3, 0x0E, 0x11, 0x17, # 64 '@'
    3, 0x1E, 0x05, 0x1E, # 65 'A'
    3, 0x1F, 0x15, 0x0A, # 66 'B'
    3, 0x0E, 0x11, 0x11, # 67 'C'
    3, 0x1F, 0x11, 0x0E, # 68 'D'
    3, 0x1F, 0x15, 0x11, # 69 'E'
    3, 0x1F, 0x05, 0x01, # 70 'F'
    3, 0x0E, 0x11, 0x1D, # 71 'G'
    3, 0x1F, 0x04, 0x1F, # 72 'H'
    3, 0x11, 0x1F, 0x11, # 73 'I'
    3, 0x08, 0x11, 0x1F, # 74 'J'
    3, 0x1F, 0x06, 0x19, # 75 'K'
    3, 0x1F, 0x10, 0x10, # 76 'L'
    3, 0x1F, 0x03, 0x1F, # 77 'M'
    3, 0x1F, 0x01, 0x1E, # 78 'N'
    3, 0x1F, 0x11, 0x1F, # 79 'O'
    3, 0x1F, 0x05, 0x02, # 80 'P'
    3, 0x0F, 0x09, 0x1F, # 81 'Q'
    3, 0x1F, 0x05, 0x1A, # 82 'R'
    3, 0x12, 0x15, 0x09, # 83 'S'
    3, 0x01, 0x1F, 0x01, # 84 'T'
    3, 0x0F, 0x10, 0x1F, # 85 'U'
    3, 0x0F, 0x18, 0x0F, # 86 'V'
    3, 0x1F, 0x08, 0x1F, # 87 'W'
    3, 0x1B, 0x04, 0x1B, # 88 'X'
    3, 0x07, 0x1C, 0x07, # 89 'Y'
    3, 0x19, 0x15, 0x13, # 90 'Z'
    2, 0x1F, 0x11, 0x00, # 91 '['
    3, 0x01, 0x06, 0x18, # 92 '\'
    2, 0x11, 0x1F, 0x00, # 93 ']'
    3, 0x02, 0x01, 0x02, # 94 '^'
    3, 0x10, 0x10, 0x10, # 95 '_'
    2, 0x01, 0x02, 0x00, # 96 '`'
    3, 0x0A, 0x1A, 0x1C, # 97 'a'
    3, 0x1F, 0x12, 0x0C, # 98 'b'
    3, 0x0C, 0x12, 0x12, # 99 'c'
    3, 0x0C, 0x12, 0x1F, # 100 'd'
    3, 0x0C, 0x16, 0x16, # 101 'e'
    3, 0x04, 0x1F, 0x05, # 102 'f'
    3, 0x14, 0x16, 0x0E, # 103 'g'
    3, 0x1F, 0x04, 0x18, # 104 'h'
    1, 0x1D, 0x00, 0x00, # 105 'i'
    2, 0x10, 0x1D, 0x00, # 106 'j'
    3, 0x1F, 0x08, 0x14, # 107 'k'
    2, 0x0F, 0x10, 0x00, # 108 'l'
    3, 0x1E, 0x06, 0x1E, # 109 'm'
    3, 0x1E, 0x02, 0x1C, # 110 'n'
    3, 0x1E, 0x12, 0x1E, # 111 'o'
    3, 0x1E, 0x0A, 0x04, # 112 'p'
    3, 0x04, 0x0A, 0x1E, # 113 'q'
    3, 0x1C, 0x02, 0x02, # 114 'r'
    3, 0x14, 0x1A, 0x0A, # 115 's'
    3, 0x02, 0x0F, 0x12, # 116 't'
    3, 0x0E, 0x10, 0x1E, # 117 'u'
    3, 0x0E, 0x18, 0x0E, # 118 'v'
    3, 0x1E, 0x18, 0x1E, # 119 'w'
    3, 0x12, 0x0C, 0x12, # 120 'x'
    3, 0x06, 0x14, 0x0E, # 121 'y'
    3, 0x1A, 0x16, 0x12, # 122 'z'
    3, 0x04, 0x1B, 0x11, # 123 '{'
    1, 0x1F, 0x00, 0x00, # 124 '|'
    3, 0x11, 0x1B, 0x04, # 125 '}'
    2, 0x0C, 0x06, 0x00, # 126 '~'
    3, 0x1F, 0x1B, 0x1F, # 127 DEL
))

FIRST_CHAR_160 = 160
OLDFONT_160 = bytes((
    2, 0b00000000, 0b00000000, 0b00000000, # 160 NO-BREAK SPACE
    1, 0b00011101, 0b00000000, 0b00000000, # 161 INVERTED EXCLAMATION MARK
    3, 0b00001110, 0b00011011, 0b00001010, # 162 CENT SIGN
    3, 0b00011110, 0b00010101, 0b00010001, # 163 POUND SIGN
    3, 0b00011111, 0b00001010, 0b00011111, # 164 CURRENCY SIGN
    3, 0b00000101, 0b00011110, 0b00000101, # 165 YEN SIGN
    1, 0b00011011, 0b00000000, 0b00000000, # 166 BROKEN BAR
    3, 0b00010110, 0b00011111, 0b00001101, # 167 SECTION SIGN
    3, 0b00000001, 0b00000000, 0b00000001, # 168 DIAERESIS
    3, 0b00000100, 0b00001010, 0b00000100, # 169 COPYRIGHT SIGN
    2, 0b00000101, 0b00000110, 0b00000000, # 170 FEMININE ORDINAL INDICATOR
    3, 0b00000100, 0b00001110, 0b00001010, # 171 LEFT-POINTING DOUBLE ANGLE QUOTATION MARK
    3, 0b00000100, 0b00000100, 0b00001100, # 172 NOT SIGN
    1, 0b00000100, 0b00000000, 0b00000000, # 173 SOFT HYPHEN
    3, 0b00001111, 0b00000101, 0b00001011, # 174 REGISTERED SIGN
    3, 0b00000001, 0b00000001, 0b00000001, # 175 MACRON
    3, 0b00000010, 0b00000101, 0b00000010, # 176 DEGREE SIGN
    3, 0b00010010, 0b00010111, 0b00010010, # 177 PLUS-MINUS SIGN
    2, 0b00001101, 0b00001010, 0b00000000, # 178 SUPERSCRIPT TWO
    2, 0b00001111, 0b00000110, 0b00000000, # 179 SUPERSCRIPT THREE
    2, 0b00000010, 0b00000001, 0b00000000, # 180 ACUTE ACCENT
    3, 0b00011110, 0b00001000, 0b00000110, # 181 MICRO SIGN
    3, 0b00000010, 0b00000111, 0b00011111, # 182 PILCROW SIGN
    1, 0b00000100, 0b00000000, 0b00000000, # 183 MIDDLE DOT
    2, 0b00010100, 0b00001000, 0b00000000, # 184 CEDILLA
    2, 0b00000010, 0b00001111, 0b00000000, # 185 SUPERSCRIPT ONE
    3, 0b00000010, 0b00000101, 0b00000010, # 186 MASCULINE ORDINAL INDICATOR
    3, 0b00001010, 0b00001110, 0b00000100, # 187 RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK
    3, 0b00001001, 0b00000100, 0b00010010, # 188 VULGAR FRACTION ONE QUARTER
    3, 0b00001001, 0b00000100, 0b00010010, # 189 VULGAR FRACTION ONE HALF
    3, 0b00001001, 0b00000100, 0b00010010, # 190 VULGAR FRACTION THREE QUARTERS
    3, 0b00001000, 0b00010101, 0b00010000, # 191 INVERTED QUESTION MARK
    3, 0b00011101, 0b00001010, 0b00011100, # 192 LATIN CAPITAL LETTER A WITH GRAVE
    3, 0b00011100, 0b00001010, 0b00011101, # 193 LATIN CAPITAL LETTER A WITH ACUTE
    3, 0b00011010, 0b00010101, 0b00011010, # 194 LATIN CAPITAL LETTER A WITH CIRCUMFLEX
    3, 0b00011101, 0b00001011, 0b00011101, # 195 LATIN CAPITAL LETTER A WITH TILDE
    3, 0b00011101, 0b00001010, 0b00011101, # 196 LATIN CAPITAL LETTER A WITH DIAERESIS
    3, 0b00011100, 0b00001011, 0b00011100, # 197 LATIN CAPITAL LETTER A WITH RING ABOVE
    3, 0b00011110, 0b00011111, 0b00010101, # 198 LATIN CAPITAL LETTER AE
    3, 0b00000110, 0b00011001, 0b00001001, # 199 LATIN CAPITAL LETTER C WITH CEDILLA
    3, 0b00011111, 0b00010110, 0b00010110, # 200 LATIN CAPITAL LETTER E WITH GRAVE
    3, 0b00011110, 0b00010110, 0b00010111, # 201 LATIN CAPITAL LETTER E WITH ACUTE
    3, 0b00011111, 0b00010111, 0b00010111, # 202 LATIN CAPITAL LETTER E WITH CIRCUMFLEX
    3, 0b00011111, 0b00010110, 0b00010111, # 203 LATIN CAPITAL LETTER E WITH DIAERESIS
    3, 0b00010011, 0b00011110, 0b00010010, # 204 LATIN CAPITAL LETTER I WITH GRAVE
    3, 0b00010010, 0b00011110, 0b00010011, # 205 LATIN CAPITAL LETTER I WITH ACUTE
    3, 0b00010101, 0b00011101, 0b00010101, # 206 LATIN CAPITAL LETTER I WITH CIRCUMFLEX
    3, 0b00010101, 0b00011100, 0b00010101, # 207 LATIN CAPITAL LETTER I WITH DIAERESIS
    3, 0b00000100, 0b00011111, 0b00001110, # 208 LATIN CAPITAL LETTER ETH
    3, 0b00011101, 0b00000101, 0b00011001, # 209 LATIN CAPITAL LETTER N WITH TILDE
    3, 0b00011101, 0b00010100, 0b00011100, # 210 LATIN CAPITAL LETTER O WITH GRAVE
    3, 0b00011100, 0b00010100, 0b00011101, # 211 LATIN CAPITAL LETTER O WITH ACUTE
    3, 0b00011101, 0b00010101, 0b00011101, # 212 LATIN CAPITAL LETTER O WITH CIRCUMFLEX
    3, 0b00011101, 0b00010101, 0b00011101, # 213 LATIN CAPITAL LETTER O WITH TILDE
    3, 0b00011101, 0b00010100, 0b00011101, # 214 LATIN CAPITAL LETTER O WITH DIAERESIS
    3, 0b00001010, 0b00000100, 0b00001010, # 215 MULTIPLICATION SIGN
    3, 0b00011110, 0b00001110, 0b00001111, # 216 LATIN CAPITAL LETTER O WITH STROKE
    3, 0b00011101, 0b00010000, 0b00011100, # 217 LATIN CAPITAL LETTER U WITH GRAVE
    3, 0b00011100, 0b00010000, 0b00011101, # 218 LATIN CAPITAL LETTER U WITH ACUTE
    3, 0b00011101, 0b00010001, 0b00011101, # 219 LATIN CAPITAL LETTER U WITH CIRCUMFLEX
    3, 0b00011101, 0b00010000, 0b00011101, # 220 LATIN CAPITAL LETTER U WITH DIAERESIS
    3, 0b00000100, 0b00011000, 0b00000101, # 221 LATIN CAPITAL LETTER Y WITH ACUTE
    3, 0b00011111, 0b00001010, 0b00000100, # 222 LATIN CAPITAL LETTER THORN
    3, 0b00011110, 0b00010101, 0b00001010, # 223 LATIN SMALL LETTER SHARP S
    3, 0b00001011, 0b00011010, 0b00011100, # 224 LATIN SMALL LETTER a WITH GRAVE
    3, 0b00001010, 0b00011010, 0b00011101, # 225 LATIN SMALL LETTER a WITH ACUTE
    3, 0b00001011, 0b00011011, 0b00011101, # 226 LATIN SMALL LETTER a WITH CIRCUMFLEX
    3, 0b00001011, 0b00011011, 0b00011101, # 227 LATIN SMALL LETTER a WITH TILDE
    3, 0b00001011, 0b00011010, 0b00011101, # 228 LATIN SMALL LETTER a WITH DIAERESIS
    3, 0b00001010, 0b00011011, 0b00011100, # 229 LATIN SMALL LETTER a WITH RING ABOVE
    3, 0b00011000, 0b00011100, 0b00010100, # 230 LATIN SMALL LETTER ae
    3, 0b00000100, 0b00011010, 0b00001010, # 231 LATIN SMALL LETTER c WITH CEDILLA
    3, 0b00001101, 0b00010110, 0b00010110, # 232 LATIN SMALL LETTER e WITH GRAVE
    3, 0b00001100, 0b00010110, 0b00010111, # 233 LATIN SMALL LETTER e WITH ACUTE
    3, 0b00001101, 0b00010111, 0b00010111, # 234 LATIN SMALL LETTER e WITH CIRCUMFLEX
    3, 0b00001101, 0b00010110, 0b00010111, # 235 LATIN SMALL LETTER e WITH DIAERESIS
    2, 0b00000001, 0b00011010, 0b00000000, # 236 LATIN SMALL LETTER i WITH GRAVE
    2, 0b00011010, 0b00000001, 0b00000000, # 237 LATIN SMALL LETTER i WITH ACUTE
    3, 0b00000010, 0b00011001, 0b00000010, # 238 LATIN SMALL LETTER i WITH CIRCUMFLEX
    3, 0b00000001, 0b00011100, 0b00000001, # 239 LATIN SMALL LETTER i WITH DIAERESIS
    3, 0b00011001, 0b00011010, 0b00011101, # 240 LATIN SMALL LETTER eth
    3, 0b00011101, 0b00000101, 0b00011001, # 241 LATIN SMALL LETTER n WITH TILDE
    3, 0b00011101, 0b00010100, 0b00011100, # 242 LATIN SMALL LETTER o WITH GRAVE
    3, 0b00011100, 0b00010100, 0b00011101, # 243 LATIN SMALL LETTER o WITH ACUTE
    3, 0b00011101, 0b00010101, 0b00011101, # 244 LATIN SMALL LETTER o WITH CIRCUMFLEX
    3, 0b00011101, 0b00010101, 0b00011101, # 245 LATIN SMALL LETTER o WITH TILDE
    3, 0b00011101, 0b00010100, 0b00011101, # 246 LATIN SMALL LETTER o WITH DIAERESIS
    3, 0b00000100, 0b00010101, 0b00000100, # 247 DIVISION SIGN
    3, 0b00011110, 0b00001110, 0b00001111, # 248 LATIN SMALL LETTER o WITH STROKE
    3, 0b00001101, 0b00010000, 0b00011100, # 249 LATIN SMALL LETTER u WITH GRAVE
    3, 0b00001100, 0b00010000, 0b00011101, # 250 LATIN SMALL LETTER u WITH ACUTE
    3, 0b00001101, 0b00010001, 0b00011101, # 251 LATIN SMALL LETTER u WITH CIRCUMFLEX
    3, 0b00001101, 0b00010000, 0b00011101, # 252 LATIN SMALL LETTER u WITH DIAERESIS
    3, 0b00010100, 0b00011000, 0b00001101, # 253 LATIN SMALL LETTER y WITH ACUTE
    3, 0b00011111, 0b00001010, 0b00000100, # 254 LATIN SMALL LETTER thorn
    3, 0b00010101, 0b00011000, 0b00001101, # 255 LATIN SMALL LETTER y WITH DIAERESIS
    3, 0b00011101, 0b00001011, 0b00011101, # 256 LATIN CAPITAL LETTER A WITH MACRON
    3, 0b00001011, 0b00011011, 0b00011101, # 257 LATIN SMALL LETTER a WITH MACRON
    3, 0b00011101, 0b00001011, 0b00011101, # 258 LATIN CAPITAL LETTER A WITH BREVE
    3, 0b00001011, 0b00011011, 0b00011101, # 259 LATIN SMALL LETTER a WITH BREVE
    3, 0b00001110, 0b00000101, 0b00011110, # 260 LATIN CAPITAL LETTER A WITH OGONEK
    3, 0b00000101, 0b00001101, 0b00011110, # 261 LATIN SMALL LETTER a WITH OGONEK
    3, 0b00001100, 0b00010010, 0b00010011, # 262 LATIN CAPITAL LETTER C WITH ACUTE
    3, 0b00001000, 0b00010100, 0b00010101, # 263 LATIN SMALL LETTER c WITH ACUTE
    3, 0b00001010, 0b00010101, 0b00010110, # 264 LATIN CAPITAL LETTER C WITH CIRCUMFLEX
    3, 0b00001010, 0b00010101, 0b00010110, # 265 LATIN SMALL LETTER c WITH CIRCUMFLEX
    3, 0b00001100, 0b00010011, 0b00010010, # 266 LATIN CAPITAL LETTER C WITH DOT ABOVE
    3, 0b00001000, 0b00010101, 0b00010100, # 267 LATIN SMALL LETTER c WITH DOT ABOVE
    3, 0b00001001, 0b00010110, 0b00010101, # 268 LATIN CAPITAL LETTER C WITH CARON
    3, 0b00001001, 0b00010110, 0b00010101, # 269 LATIN SMALL LETTER c WITH CARON
    3, 0b00011111, 0b00010010, 0b00001101, # 270 LATIN CAPITAL LETTER D WITH CARON
    3, 0b00011000, 0b00011111, 0b00000001, # 271 LATIN SMALL LETTER d WITH CARON
    3, 0b00000100, 0b00011111, 0b00001110, # 272 LATIN CAPITAL LETTER D WITH STROKE
    3, 0b00001001, 0b00010101, 0b00011111, # 273 LATIN SMALL LETTER d WITH STROKE
    3, 0b00011111, 0b00010111, 0b00010111, # 274 LATIN CAPITAL LETTER E WITH MACRON
    3, 0b00001101, 0b00010111, 0b00010111, # 275 LATIN SMALL LETTER e WITH MACRON
    3, 0b00011111, 0b00010110, 0b00010111, # 276 LATIN CAPITAL LETTER E WITH BREVE
    3, 0b00001101, 0b00010110, 0b00010111, # 277 LATIN SMALL LETTER e WITH BREVE
    3, 0b00011110, 0b00010111, 0b00010110, # 278 LATIN CAPITAL LETTER E WITH DOT ABOVE
    3, 0b00001100, 0b00010111, 0b00010110, # 279 LATIN SMALL LETTER e WITH DOT ABOVE
    3, 0b00001111, 0b00001011, 0b00011011, # 280 LATIN CAPITAL LETTER E WITH OGONEK
    3, 0b00000110, 0b00001011, 0b00011011, # 281 LATIN SMALL LETTER e WITH OGONEK
    3, 0b00011111, 0b00010110, 0b00010111, # 282 LATIN CAPITAL LETTER E WITH CARON
    3, 0b00001101, 0b00010110, 0b00010111, # 283 LATIN SMALL LETTER e WITH CARON
    3, 0b00001101, 0b00010011, 0b00011011, # 284 LATIN CAPITAL LETTER G WITH CIRCUMFLEX
    3, 0b00010101, 0b00010111, 0b00001111, # 285 LATIN SMALL LETTER g WITH CIRCUMFLEX
    3, 0b00001101, 0b00010011, 0b00011011, # 286 LATIN CAPITAL LETTER G WITH BREVE
    3, 0b00010101, 0b00010111, 0b00001111, # 287 LATIN SMALL LETTER g WITH BREVE
    3, 0b00001100, 0b00010011, 0b00011010, # 288 LATIN CAPITAL LETTER G WITH DOT ABOVE
    3, 0b00010100, 0b00010111, 0b00001110, # 289 LATIN SMALL LETTER g WITH DOT ABOVE
    3, 0b00000110, 0b00011001, 0b00001101, # 290 LATIN CAPITAL LETTER G WITH CEDILLA
    3, 0b00010100, 0b00010111, 0b00001110, # 291 LATIN SMALL LETTER g WITH CEDILLA
    3, 0b00011101, 0b00001001, 0b00011101, # 292 LATIN CAPITAL LETTER H WITH CIRCUMFLEX
    3, 0b00011101, 0b00001001, 0b00010001, # 293 LATIN SMALL LETTER h WITH CIRCUMFLEX
    3, 0b00011111, 0b00001010, 0b00011111, # 294 LATIN CAPITAL LETTER H WITH STROKE
    3, 0b00011111, 0b00001010, 0b00010000, # 295 LATIN SMALL LETTER h WITH STROKE
    3, 0b00010101, 0b00011101, 0b00010101, # 296 LATIN CAPITAL LETTER I WITH TILDE
    3, 0b00000001, 0b00011101, 0b00000001, # 297 LATIN SMALL LETTER i WITH TILDE
    3, 0b00010101, 0b00011101, 0b00010101, # 298 LATIN CAPITAL LETTER I WITH MACRON
    3, 0b00000001, 0b00011101, 0b00000001, # 299 LATIN SMALL LETTER i WITH MACRON
    3, 0b00010101, 0b00011101, 0b00010101, # 300 LATIN CAPITAL LETTER I WITH BREVE
    3, 0b00000001, 0b00011101, 0b00000001, # 301 LATIN SMALL LETTER i WITH BREVE
    3, 0b00001001, 0b00001111, 0b00011001, # 302 LATIN CAPITAL LETTER I WITH OGONEK
    2, 0b00001101, 0b00010000, 0b00000000, # 303 LATIN SMALL LETTER i WITH OGONEK
    3, 0b00010100, 0b00011101, 0b00010100, # 304 LATIN CAPITAL LETTER I WITH DOT ABOVE
    1, 0b00011110, 0b00000000, 0b00000000, # 305 LATIN SMALL LETTER DOTLESS I
    3, 0b00011111, 0b00010000, 0b00001111, # 306 LATIN CAPITAL LETTER IJ
    3, 0b00001101, 0b00010000, 0b00011101, # 307 LATIN SMALL LETTER ij
    3, 0b00010101, 0b00010101, 0b00001101, # 308 LATIN CAPITAL LETTER J WITH CIRCUMFLEX
    3, 0b00010001, 0b00001101, 0b00000001, # 309 LATIN SMALL LETTER j WITH CIRCUMFLEX
    3, 0b00000111, 0b00010010, 0b00000101, # 310 LATIN CAPITAL LETTER K WITH CEDILLA
    3, 0b00000111, 0b00010010, 0b00000101, # 311 LATIN SMALL LETTER k WITH CEDILLA
    3, 0b00011100, 0b00001000, 0b00010100, # 312 LATIN SMALL LETTER kra
    3, 0b00011100, 0b00010001, 0b00010000, # 313 LATIN CAPITAL LETTER L WITH ACUTE
    2, 0b00011110, 0b00000001, 0b00000000, # 314 LATIN SMALL LETTER l WITH ACUTE
    3, 0b00000111, 0b00010100, 0b00000100, # 315 LATIN CAPITAL LETTER L WITH CEDILLA
    2, 0b00010000, 0b00001111, 0b00000000, # 316 LATIN SMALL LETTER l WITH CEDILLA
    3, 0b00011111, 0b00010000, 0b00010001, # 317 LATIN CAPITAL LETTER L WITH CARON
    3, 0b00001111, 0b00010000, 0b00000001, # 318 LATIN SMALL LETTER l WITH CARON
    3, 0b00011111, 0b00010000, 0b00010100, # 319 LATIN CAPITAL LETTER L WITH MIDDLE DOT
    3, 0b00001111, 0b00010000, 0b00000100, # 320 LATIN SMALL LETTER l WITH MIDDLE DOT
    3, 0b00000100, 0b00011111, 0b00010100, # 321 LATIN CAPITAL LETTER L WITH STROKE
    3, 0b00000100, 0b00001111, 0b00000100, # 322 LATIN SMALL LETTER l WITH STROKE
    3, 0b00011110, 0b00000010, 0b00011101, # 323 LATIN CAPITAL LETTER N WITH ACUTE
    3, 0b00011100, 0b00000100, 0b00011001, # 324 LATIN SMALL LETTER n WITH ACUTE
    3, 0b00001111, 0b00010001, 0b00001110, # 325 LATIN CAPITAL LETTER N WITH CEDILLA
    3, 0b00001110, 0b00010010, 0b00001100, # 326 LATIN SMALL LETTER n WITH CEDILLA
    3, 0b00011111, 0b00000010, 0b00011101, # 327 LATIN CAPITAL LETTER N WITH CARON
    3, 0b00011101, 0b00000110, 0b00011001, # 328 LATIN SMALL LETTER n WITH CARON
    3, 0b00011101, 0b00000100, 0b00011000, # 329 LATIN SMALL LETTER n PRECEDED BY APOSTROPHE
    3, 0b00001111, 0b00000001, 0b00011110, # 330 LATIN CAPITAL ENG
    3, 0b00001110, 0b00000010, 0b00011100, # 331 LATIN SMALL ENG
    3, 0b00011101, 0b00010101, 0b00011101, # 332 LATIN CAPITAL LETTER O WITH MACRON
    3, 0b00011101, 0b00010101, 0b00011101, # 333 LATIN SMALL LETTER o WITH MACRON
    3, 0b00011101, 0b00010110, 0b00011101, # 334 LATIN CAPITAL LETTER O WITH BREVE
    3, 0b00011101, 0b00010110, 0b00011101, # 335 LATIN SMALL LETTER o WITH BREVE
    3, 0b00011101, 0b00010100, 0b00011101, # 336 LATIN CAPITAL LETTER O WITH DOUBLE ACUTE
    3, 0b00011101, 0b00010100, 0b00011101, # 337 LATIN SMALL LETTER o WITH DOUBLE ACUTE
    3, 0b00011111, 0b00011111, 0b00010101, # 338 LATIN CAPITAL LETTER OE
    3, 0b00011110, 0b00011110, 0b00010110, # 339 LATIN SMALL LETTER OE
    3, 0b00011110, 0b00001010, 0b00010101, # 340 LATIN CAPITAL LETTER R WITH ACUTE
    3, 0b00011000, 0b00000100, 0b00000101, # 341 LATIN SMALL LETTER r WITH ACUTE
    3, 0b00001111, 0b00010101, 0b00001010, # 342 LATIN CAPITAL LETTER R WITH CEDILLA
    3, 0b00001100, 0b00010010, 0b00000010, # 343 LATIN SMALL LETTER r WITH CEDILLA
    3, 0b00011111, 0b00001010, 0b00010101, # 344 LATIN CAPITAL LETTER R WITH CARON
    3, 0b00011001, 0b00000110, 0b00000101, # 345 LATIN SMALL LETTER r WITH CARON
    3, 0b00010100, 0b00011010, 0b00001011, # 346 LATIN CAPITAL LETTER S WITH ACUTE
    3, 0b00010100, 0b00011010, 0b00001011, # 347 LATIN SMALL LETTER s WITH ACUTE
    3, 0b00010110, 0b00011011, 0b00001010, # 348 LATIN CAPITAL LETTER S WITH CIRCUMFLEX
    3, 0b00010110, 0b00011011, 0b00001010, # 349 LATIN SMALL LETTER s WITH CIRCUMFLEX
    3, 0b00001010, 0b00011101, 0b00000101, # 350 LATIN CAPITAL LETTER S WITH CEDILLA
    3, 0b00001010, 0b00011101, 0b00000101, # 351 LATIN SMALL LETTER s WITH CEDILLA
    3, 0b00010101, 0b00011010, 0b00001011, # 352 LATIN CAPITAL LETTER S WITH CARON
    3, 0b00010101, 0b00011010, 0b00001011, # 353 LATIN SMALL LETTER s WITH CARON
    3, 0b00010001, 0b00001111, 0b00000001, # 354 LATIN CAPITAL LETTER T WITH CEDILLA
    3, 0b00000010, 0b00010111, 0b00001010, # 355 LATIN SMALL LETTER t WITH CEDILLA
    3, 0b00000101, 0b00011110, 0b00001110, # 356 LATIN CAPITAL LETTER T WITH CARON
    3, 0b00001110, 0b00010100, 0b00000001, # 357 LATIN SMALL LETTER t WITH CARON
    3, 0b00000101, 0b00011111, 0b00000101, # 358 LATIN CAPITAL LETTER T WITH STROKE
    2, 0b00001111, 0b00010101, 0b00000000, # 359 LATIN SMALL LETTER t WITH STROKE
    3, 0b00011101, 0b00010001, 0b00011101, # 360 LATIN CAPITAL LETTER U WITH TILDE
    3, 0b00011101, 0b00010001, 0b00011101, # 361 LATIN SMALL LETTER u WITH TILDE
    3, 0b00011101, 0b00010001, 0b00011101, # 362 LATIN CAPITAL LETTER U WITH MACRON
    3, 0b00011101, 0b00010001, 0b00011101, # 363 LATIN SMALL LETTER u WITH MACRON
    3, 0b00011101, 0b00010001, 0b00011101, # 364 LATIN CAPITAL LETTER U WITH BREVE
    3, 0b00011101, 0b00010001, 0b00011101, # 365 LATIN SMALL LETTER u WITH BREVE
    3, 0b00011010, 0b00010101, 0b00011010, # 366 LATIN CAPITAL LETTER U WITH RING ABOVE
    3, 0b00011010, 0b00010101, 0b00011010, # 367 LATIN SMALL LETTER u WITH RING ABOVE
    3, 0b00011101, 0b00010000, 0b00011101, # 368 LATIN CAPITAL LETTER U WITH DOUBLE ACUTE
    3, 0b00011101, 0b00010000, 0b00011101, # 369 LATIN SMALL LETTER u WITH DOUBLE ACUTE
    3, 0b00001111, 0b00011000, 0b00001111, # 370 LATIN CAPITAL LETTER U WITH OGONEK
    3, 0b00001110, 0b00011000, 0b00001110, # 371 LATIN SMALL LETTER u WITH OGONEK
    3, 0b00011101, 0b00011001, 0b00011101, # 372 LATIN CAPITAL LETTER W WITH CIRCUMFLEX
    3, 0b00011101, 0b00011001, 0b00011101, # 373 LATIN SMALL LETTER w WITH CIRCUMFLEX
    3, 0b00000101, 0b00011001, 0b00000101, # 374 LATIN CAPITAL LETTER Y WITH CIRCUMFLEX
    3, 0b00000101, 0b00001001, 0b00011101, # 375 LATIN SMALL LETTER y WITH CIRCUMFLEX
    3, 0b00000101, 0b00011000, 0b00000101, # 376 LATIN CAPITAL LETTER Y WITH DIAERESIS
    3, 0b00011010, 0b00010110, 0b00010011, # 377 LATIN CAPITAL LETTER Z WITH ACUTE
    3, 0b00010100, 0b00011100, 0b00010101, # 378 LATIN SMALL LETTER z WITH ACUTE
    3, 0b00011010, 0b00010111, 0b00010010, # 379 LATIN CAPITAL LETTER Z WITH DOT ABOVE
    3, 0b00010100, 0b00011101, 0b00010100, # 380 LATIN SMALL LETTER z WITH DOT ABOVE
    3, 0b00011011, 0b00010110, 0b00010011, # 381 LATIN CAPITAL LETTER Z WITH CARON
    3, 0b00010101, 0b00011110, 0b00010101, # 382 LATIN SMALL LETTER z WITH CARON
    3, 0b00011110, 0b00000001, 0b00000010, # 383 LATIN SMALL LETTER LONG S
))

FIRST_CHAR_1040 = 0x410  # '–ê'
OLDFONT_1040 = bytes((
    3, 0x1E, 0x05, 0x1E, # 0x410 'A'
    3, 0b00011111, 0b00010101, 0b00001001, # 0x411 '–ë'
    3, 0x1F, 0x15, 0x0A, # 0x412 '–í'
    3, 0b00011111, 0b00000001, 0b00000001, # 0x413 '–ì'
    3, 0b00011110, 0b00001001, 0b00011111, # 0x414 '–î'
    3, 0x1F, 0x15, 0x11, # 0x415 '–ï'
    3, 0b00011011, 0b00011111, 0b00011011, # 0x416 '–ñ'
    3, 0b00010001, 0b00010101, 0b00001010, # 0x417 '–ó'
    3, 0b00011111, 0b00000110, 0b00011111, # 0x418 '–ò'
    3, 0b00011101, 0b00001010, 0b00011101, # 0x419 '–ô'
    3, 0x1F, 0x06, 0x19, # 0x41A '–ö'
    3, 0b00011100, 0b00000011, 0b00011111, # 0x41B '–õ'
    3, 0x1F, 0x03, 0x1F, # 0x41C '–ú'
    3, 0x1F, 0x04, 0x1F, # 0x41D '–ù'
    3, 0x1F, 0x11, 0x1F, # 0x41E '–û'
    3, 0b00011111, 0b00000001, 0b00011111, # 0x41F '–ü'
    3, 0x1F, 0x05, 0x02, # 0x420 '–†'
    3, 0x0E, 0x11, 0x11, # 0x421 '–°'
    3, 0x01, 0x1F, 0x01, # 0x422 '–¢'
    3, 0b00010011, 0b00001100, 0b00000011, # 0x423 '–£'
    3, 0b00001110, 0b00011111, 0b00001110, # 0x424 '–§'
    3, 0x1B, 0x04, 0x1B, # 0x425 '–•'
    3, 0b00001111, 0b00001000, 0b00011111, # 0x426 '–¶'
    3, 0b00000111, 0b00000100, 0b00011111, # 0x427 '–ß'
    3, 0b00011111, 0b00011000, 0b00011111, # 0x428 '–®'
    3, 0b00001111, 0b00001100, 0b00011111, # 0x429 '–©'
    3, 0b00000001, 0b00011111, 0b00011000, # 0x42A '–™'
    3, 0b00011111, 0b00010100, 0b00011111, # 0x42B '–´'
    3, 0b00011111, 0b00010100, 0b00001000, # 0x42C '–¨'
    3, 0b00010001, 0b00010101, 0b00001110, # 0x42D '–≠'
    3, 0b00011111, 0b00001010, 0b00001110, # 0x42E '–Æ'
    3, 0b00011010, 0b00000101, 0b00011111, # 0x42F '–Ø'
    3, 0x0A, 0x1A, 0x1C, # 0x430 '–∞'
    3, 0b00001110, 0b00010101, 0b00001001, # 0x431 '–±'
    3, 0b00011110, 0b00010110, 0b00001100, # 0x432 '–≤'
    3, 0b00011110, 0b00000010, 0b00000010, # 0x433 '–≥'
    3, 0b00011100, 0b00001010, 0b00011110, # 0x434 '–¥'
    3, 0x0C, 0x16, 0x16, # 0x435 '–µ'
    3, 0b00011010, 0b00011110, 0b00011010, # 0x436 '–∂'
    3, 0b00010010, 0b00010110, 0b00001100, # 0x437 '–∑'
    3, 0b00011110, 0b00001100, 0b00011110, # 0x438 '–∏'
    3, 0b00011101, 0b00001010, 0b00011101, # 0x439 '–π'
    3, 0b00011110, 0b00000100, 0b00011010, # 0x43A '–∫'
    3, 0b00011000, 0b00000110, 0b00011110, # 0x43B '–ª'
    3, 0b00011110, 0b00000110, 0b00011110, # 0x43C '–º'
    3, 0b00011110, 0b00000100, 0b00011110, # 0x43D '–Ω'
    3, 0x1E, 0x12, 0x1E, # 0x43E '–æ'
    3, 0b00011110, 0b00000010, 0b00011110, # 0x43F '–ø'
    3, 0x1E, 0x0A, 0x04, # 0x440 '—Ä'
    3, 0x0C, 0x12, 0x12, # 0x441 '—Å'
    3, 0b00000010, 0b00011110, 0b00000010, # 0x442 '—Ç'
    3, 0b00010110, 0b00001000, 0b00000110, # 0x443 '—É'
    3, 0b00001100, 0b00011110, 0b00001100, # 0x444 '—Ñ'
    3, 0x12, 0x0C, 0x12, # 0x445 '—Ö'
    3, 0b00001110, 0b00001000, 0b00011110, # 0x446 '—Ü'
    3, 0b00000110, 0b00000100, 0b00011110, # 0x447 '—á'
    3, 0b00011110, 0b00011000, 0b00011110, # 0x448 '—à'
    3, 0b00001110, 0b00001100, 0b00011110, # 0x449 '—â'
    3, 0b00000010, 0b00011110, 0b00011000, # 0x44A '—ä'
    3, 0b00011110, 0b00010100, 0b00011110, # 0x44B '—ã'
    3, 0b00011110, 0b00010100, 0b00001000, # 0x44C '—å'
    3, 0b00010010, 0b00010110, 0b00001100, # 0x44D '—ç'
    3, 0b00011110, 0b00001010, 0b00001100, # 0x44E '—é'
    3, 0b00010100, 0b00001010, 0b00011110, # 0x44F '—è'
    3, 0b00001101, 0b00010110, 0b00010110, # 0x450 '—ê'
    3, 0b00001101, 0b00010110, 0b00010111, # 0x451 '—ë'
    3, 0b00001111, 0b00000100, 0b00011000, # 0x452 '—í'
    3, 0b00011100, 0b00000100, 0b00000101, # 0x453 '—ì'
    3, 0b00001100, 0b00010110, 0b00010010, # 0x454 '—î'
    3, 0x14, 0x1A, 0x0A, # 0x455 '—ï'
    1, 0b00011101, 0b00000000, 0b00000000, # 0x456 '—ñ'
    3, 0b00000001, 0b00011101, 0b00000001, # 0x457 '—ó'
    2, 0x10, 0x1D, 0x00, # 0x458 '—ò'
    3, 0b00011100, 0b00011110, 0b00010000, # 0x459 '—ô'
    3, 0b00011110, 0b00011110, 0b00001000, # 0x45A '—ö'
    3, 0b00011111, 0b00001010, 0b00010000, # 0x45B '—õ'
    3, 0b00011100, 0b00001000, 0b00010101, # 0x45C '—ú'
    3, 0b00011101, 0b00001000, 0b00011100, # 0x45D '—ù'
    3, 0b00011101, 0b00001001, 0b00000101, # 0x45E '—û'
    3, 0b00001110, 0b00011000, 0b00001110  # 0x45F '—ü'
))

FIRST_CHAR_8208 = 0x2010  # '‚Äê'
OLDFONT_8208 = bytes((
    2, 0b00000100, 0b00000100, 0b00000000, # 0x2010 '-' hyphen
    2, 0b00000100, 0b00000100, 0b00000000, # 0x2011 '‚Äë' non-breaking hyphen
    3, 0b00000100, 0b00000100, 0b00000100, # 0x2012 '‚Äî' figure dash
    3, 0b00000100, 0b00000100, 0b00000100, # 0x2013 '‚Äï' en dash
    3, 0b00000100, 0b00000100, 0b00000100, # 0x2014 '‚Äí' em dash
    3, 0b00000100, 0b00000100, 0b00000100, # 0x2015 '‚Äï' horizontal bar
    3, 0b00011111, 0b00000000, 0b00011111, # 0x2016 '‚Äñ' double vertical line
    3, 0b00010100, 0b00010100, 0b00010100, # 0x2017 '‚Äó' double low line
    2, 0b00000011, 0b00000001, 0b00000000, # 0x2018 '‚Äò' left single quotation mark
    2, 0b00000010, 0b00000011, 0b00000000, # 0x2019 '‚Äô' right single quotation mark
    2, 0b00010000, 0b00011000, 0b00000000, # 0x201A '‚Äö' single low-9 quotation mark
    2, 0b00000011, 0b00000001, 0b00000000, # 0x201B '‚Äõ' single high-reversed-9 quotation mark
    3, 0b00000011, 0b00000000, 0b00000011, # 0x201C '‚Äú' left double quotation mark
    3, 0b00000011, 0b00000000, 0b00000011, # 0x201D '‚Äù' right double quotation mark
    3, 0b00011000, 0b00000000, 0b00011000, # 0x201E '‚Äû' double low-9 quotation mark
    3, 0b00000011, 0b00000000, 0b00000011, # 0x201F '‚Äü' double high-reversed-9 quotation mark
    3, 0b00000010, 0b00011111, 0b00000010, # 0x2020 '‚Ä†' dagger
    3, 0b00001010, 0b00011111, 0b00001010, # 0x2021 '‚Ä°' double dagger
    1, 0b00000100, 0b00000000, 0b00000000, # 0x2022 '‚Ä¢' bullet
    2, 0b00001110, 0b00000100, 0b00000000, # 0x2023 '‚Ä£' triangular bullet
    1, 0b00010000, 0b00000000, 0b00000000, # 0x2024 '‚Ä§' one dot leader
    3, 0b00010000, 0b00000000, 0b00010000, # 0x2025 '‚Ä•' two dot leader
    3, 0b00010000, 0b00000000, 0b00010000, # 0x2026 '‚Ä¶' horizontal ellipsis
    1, 0b00000100, 0b00000000, 0b00000000, # 0x2027 '‚Äß' hyphenation point
    1, 0b00000000, 0b00000000, 0b00000000, # 0x2028 line separator
    1, 0b00000000, 0b00000000, 0b00000000, # 0x2029 paragraph separator
    1, 0b00000000, 0b00000000, 0b00000000, # 0x202A left-to-right embedding
    1, 0b00000000, 0b00000000, 0b00000000, # 0x202B right-to-left embedding
    1, 0b00000000, 0b00000000, 0b00000000, # 0x202C pop directional formatting
    1, 0b00000000, 0b00000000, 0b00000000, # 0x202D left-to-right override
    1, 0b00000000, 0b00000000, 0b00000000, # 0x202E right-to-left override
    1, 0b00000000, 0b00000000, 0b00000000, # 0x202F narrow no-break space
    3, 0b00001001, 0b00010100, 0b00010010, # 0x2030 '‚Ä∞' per mille sign
    3, 0b00001001, 0b00010100, 0b00010010, # 0x2031 '‚Ä±' per ten thousand sign
    1, 0b00000110, 0b00000000, 0b00000000, # 0x2032 '‚Ä≤' prime
    3, 0b00000110, 0b00000000, 0b00000110, # 0x2033 '‚Ä≥' double prime
    3, 0b00000110, 0b00000000, 0b00000110, # 0x2034 '‚Ä¥' triple prime
    1, 0b00000110, 0b00000000, 0b00000000, # 0x2035 '‚Äµ' reversed prime
    3, 0b00000110, 0b00000000, 0b00000110, # 0x2036 '‚Ä∂' double reversed prime
    3, 0b00000110, 0b00000000, 0b00000110, # 0x2037 '‚Ä∑' triple reversed prime
    3, 0b00010000, 0b00001000, 0b00010000, # 0x2038 '‚Ä∏' caret
    2, 0b00000100, 0b00001010, 0b00000000, # 0x2039 '‚Äπ' single left-pointing angle quotation mark
    2, 0b00001010, 0b00000100, 0b00000000, # 0x203A '‚Ä∫' single right-pointing angle quotation mark
    3, 0b00001010, 0b00000100, 0b00001010, # 0x203B '‚Äª' reference mark
    3, 0b00010111, 0b00000000, 0b00010111, # 0x203C '‚Äº' double exclamation mark
    3, 0b00000001, 0b00010111, 0b00000010, # 0x203D '‚ÄΩ' interrobang
    3, 0b00000001, 0b00000001, 0b00000001, # 0x203E '‚Äæ' overline
    3, 0b00001000, 0b00010000, 0b00001000, # 0x203F '‚Äø' undertie
    3, 0b00000010, 0b00000001, 0b00000010, # 0x2040 '‚ÅÄ' character tie
    3, 0b00010000, 0b00001000, 0b00010100, # 0x2041 '‚ÅÅ' caret insertion point
    3, 0b00001000, 0b00000010, 0b00001000, # 0x2042 '‚ÅÇ' asterism
    1, 0b00000100, 0b00000000, 0b00000000, # 0x2043 '‚ÅÉ' hyphen bullet
    3, 0b00001000, 0b00000100, 0b00000010, # 0x2044 '‚ÅÑ' fraction slash
    2, 0b00011111, 0b00010101, 0b00000000, # 0x2045 '‚ÅÖ' left square bracket with quill
    2, 0b00010101, 0b00011111, 0b00000000, # 0x2046 '‚ÅÜ' right square bracket with quill
    3, 0b00000001, 0b00010101, 0b00000010, # 0x2047 '‚Åá' double question mark
    3, 0b00000001, 0b00010101, 0b00010111, # 0x2048 '‚Åà' question exclamation mark
    3, 0b00010111, 0b00000001, 0b00010110, # 0x2049 '‚Åâ' exclamation question mark
    3, 0b00000100, 0b00000100, 0b00011100, # 0x204A '‚Åä' Tironian sign et
    3, 0b00011111, 0b00000111, 0b00000010, # 0x204B '‚Åã' reversed pilcrow sign
    3, 0b00000100, 0b00001110, 0b00001110, # 0x204C '‚Åå' black leftwards bullet
    3, 0b00001110, 0b00001110, 0b00000100, # 0x204D '‚Åç' black rightwards bullet
    3, 0b00010100, 0b00001000, 0b00010100, # 0x204E '‚Åé' low asterisk
    1, 0b00011010, 0b00000000, 0b00000000, # 0x204F '‚Åè' undertie
    3, 0b00001010, 0b00010001, 0b00001010, # 0x2050 '‚Åê' caret
    3, 0b00010101, 0b00001010, 0b00010101, # 0x2051 '‚Åë' two asterisks aligned vertically
    3, 0b00001001, 0b00000100, 0b00010010, # 0x2052 '‚Åí' commercial minus sign
    3, 0b00000100, 0b00000100, 0b00000100, # 0x2053 '‚Åì' swung dash
    3, 0b00010000, 0b00001000, 0b00010000, # 0x2054 '‚Åî' inverted swung dash
    3, 0b00001010, 0b00000100, 0b00001010, # 0x2055 '‚Åï' flower punctuation mark
    3, 0b00000100, 0b00000000, 0b00001010, # 0x2056 '‚Åñ' three dot punctuation
    3, 0b00000011, 0b00000000, 0b00000011, # 0x2057 '‚Åó' quadruple prime
    3, 0b00000100, 0b00001010, 0b00000100, # 0x2058 '‚Åò' four dot punctuation
    3, 0b00001010, 0b00000100, 0b00001010, # 0x2059 '‚Åô' five dot punctuation
    1, 0b00001010, 0b00000000, 0b00000000, # 0x205A '‚Åö' two dot punctuation
    3, 0b00000100, 0b00010001, 0b00000100, # 0x205B '‚Åõ' four dot punctuation
    3, 0b00010101, 0b00001110, 0b00010101, # 0x205C '‚Åú' dotted cross
    1, 0b00010101, 0b00000000, 0b00000000, # 0x205D '‚Åù' tricolon
    1, 0b00010101, 0b00000000, 0b00000000, # 0x205E '‚Åû' vertical four dot punctuation
    2, 0b00000000, 0b00000000, 0b00000000  # 0x205F medium mathematical space
))

FIRST_CHAR_0x1f1e6 = 0x1F1E6  # 'üá¶'
OLDFONT_0x1f1e6 = bytes((
    3, 0x1E, 0x05, 0x1E, # 1F1E6 üá¶
    3, 0x1F, 0x15, 0x0A, # 1F1E7 üáß
    3, 0x0E, 0x11, 0x11, # 1F1E8 üá®
    3, 0x1F, 0x11, 0x0E, # 1F1E9 üá©
    3, 0x1F, 0x15, 0x11, # 1F1EA üá™
    3, 0x1F, 0x05, 0x01, # 1F1EB üá´
    3, 0x0E, 0x11, 0x1D, # 1F1EC üá¨
    3, 0x1F, 0x04, 0x1F, # 1F1ED üá≠
    3, 0x11, 0x1F, 0x11, # 1F1EE üáÆ
    3, 0x08, 0x11, 0x1F, # 1F1EF üáØ
    3, 0x1F, 0x06, 0x19, # 1F1F0 üá∞
    3, 0x1F, 0x10, 0x10, # 1F1F1 üá±
    3, 0x1F, 0x03, 0x1F, # 1F1F2 üá≤
    3, 0x1F, 0x01, 0x1E, # 1F1F3 üá≥
    3, 0x1F, 0x11, 0x1F, # 1F1F4 üá¥
    3, 0x1F, 0x05, 0x02, # 1F1F5 üáµ
    3, 0x0F, 0x09, 0x1F, # 1F1F6 üá∂
    3, 0x1F, 0x05, 0x1A, # 1F1F7 üá∑
    3, 0x12, 0x15, 0x09, # 1F1F8 üá∏
    3, 0x01, 0x1F, 0x01, # 1F1F9 üáπ
    3, 0x0F, 0x10, 0x1F, # 1F1FA üá∫
    3, 0x0F, 0x18, 0x0F, # 1F1FB üáª
    3, 0x1F, 0x08, 0x1F, # 1F1FC üáº
    3, 0x1B, 0x04, 0x1B, # 1F1FD üáΩ
    3, 0x07, 0x1C, 0x07, # 1F1FE üáæ
    3, 0x19, 0x15, 0x13  # 1F1FF üáø
))

def construct_structure(oldfont, firstchar):
    offset = 0
    while offset < len(oldfont):
        width = oldfont[offset]
        bitmap = []
        for row in range(WIDTH):
            byte = oldfont[offset + 1 + row]
            bitmap.append(byte)
        yield chr(firstchar), (width, HEIGHT, bitmap)
        firstchar += 1
        offset += 1 + WIDTH

def rotate_bitmap(struct):
    for key, (width, height, bitmap) in struct.items():
        new_bitmap = [0] * height
        for x in range(width):
            for y in range(height):
                if bitmap[x] & (1 << y):
                    new_bitmap[y] |= (1 << (7 - x))
        struct[key] = (width, height, new_bitmap)

def print_orig_bitmap(struct): 
    for key, (width, height, bitmap) in struct.items():
        print(f"Char {key} (width={width}):")
        for x in range(width):
            row = bitmap[x]
            line = ""
            for y in range(8):
                if row & (1 << (7 - y)):
                    line += "#"
                else:
                    line += "."
            print(line)
        print()

def print_bitmap(struct):
    for key, (width, height, bitmap) in struct.items():
        print(f"Char {key} (width={width}):")
        for y in range(height):
            row = bitmap[y]
            line = ""
            for x in range(8):
                if row & (1 << (7 - x)):
                    line += "#"
                else:
                    line += "."
            print(line)
        print()

def create_adafruit_bitmap(struct):
    for key, (width, height, bitmap) in struct.items():
        current_byte = 0
        current_byte_bit = 128
        added = 0
        adafruit_bitmap = []
        h = height
        yOffset = -height
        rangeLimit = height
        for y in range(height - 1, -1, -1):
            if bitmap[y] != 0:
                break
            rangeLimit -= 1
            h -= 1
        for y in range(0, rangeLimit):
            row = bitmap[y]
            if row == 0 and added == 0 and current_byte_bit == 128:
                h -= 1
                yOffset += 1
                continue
            for x in range(width):
                if row & (1 << (7 - x)):
                    current_byte |= current_byte_bit
                current_byte_bit >>= 1
                if current_byte_bit == 0:
                    adafruit_bitmap.append(current_byte)
                    added += 1
                    current_byte = 0
                    current_byte_bit = 128
        if current_byte_bit != 128:
            adafruit_bitmap.append(current_byte)
            current_byte = 0
            current_byte_bit = 128
            added += 1
        struct[key] = (width, h, yOffset, adafruit_bitmap)

struct = dict(construct_structure(OLDFONT, FIRST_CHAR))

struct160 = dict(construct_structure(OLDFONT_160, FIRST_CHAR_160))
struct.update(struct160)

struct1040 = dict(construct_structure(OLDFONT_1040, FIRST_CHAR_1040))
struct.update(struct1040)

struct8208 = dict(construct_structure(OLDFONT_8208, FIRST_CHAR_8208))
struct.update(struct8208)

# print("Original:")
# print_orig_bitmap(struct)
# print("-------------------------")

rotate_bitmap(struct)
# print("Rotated:")
# print_bitmap(struct)
# print("-------------------------")
create_adafruit_bitmap(struct)
# print("Converted to Adafruit:")
# print(struct)
# print("-------------------------")

struct['‚Üê'] = (4, 5, -5, [0b00100100, 0b11110100, 0b00100000]) # left arrow
struct['‚Üë'] = (5, 5, -5, [0b00100011, 0b10101010, 0b01000010, 0b00000000]) # up arrow
struct['‚Üí'] = (4, 5, -5, [0b01000010, 0b11110010, 0b01000000]) # right arrow
struct['‚Üì'] = (5, 5, -5, [0b00100001, 0b00101010, 0b11100010, 0b00000000]) # down arrow

struct1f1e6 = dict(construct_structure(OLDFONT_0x1f1e6, FIRST_CHAR_0x1f1e6))
rotate_bitmap(struct1f1e6)
create_adafruit_bitmap(struct1f1e6)

struct.update(struct1f1e6)

# ---- Replaced characters -----
struct['$'] = (3, 7, -6, [0b01001111, 0b00100111, 0b10010000])
struct[','] = (1, 2, -1, [0b11000000])
struct[';'] = (1, 4, -3, [0b10110000])
struct['Q'] = (3, 6, -5, [0b11110110, 0b11011110, 0b01000000])
struct['g'] = (3, 5, -4, [0b01110111, 0b10010110])
struct['j'] = (2, 6, -5, [0b01000101, 0b01100000])
struct['p'] = (3, 5, -4, [0b11010111, 0b01001000])
struct['q'] = (3, 5, -4, [0b01110101, 0b10010010])
struct['y'] = (3, 5, -4, [0b10110101, 0b10010110])

struct['¬ß'] = (3, 7, -6, [0b01110001, 0b01010100, 0b01110000])  # section sign
struct['¬£'] = (3, 5, -5, [0b01010011, 0b01001110])  # pound sign

struct['‚Äî'] = (4, 1, -3, [0b11110000])  # em dash
struct['¬≤'] = (2, 4, -6, [0b11011011]) # superscript two
struct['¬≥'] = (2, 4, -6, [0b10010110]) # superscript two
struct['¬µ'] = (3, 5, -4, [0b10110110, 0b11101000]) # micro sign
struct['¬∏'] = (2, 3, -2, [0b10011000]) # cedilla
struct['¬π'] = (2, 4, -6, [0b01110101]) # superscript one
struct['¬∫'] = (3, 4, -6, [0b01010101, 0b01110000]) # masculine ordinal indicator
struct['¬ª'] = (4, 3, -4, [0b10100101, 0b10100000]) # right double angle quotation mark
struct['¬´'] = (4, 3, -4, [0b01011010, 0b01010000]) # right double angle quotation mark
struct['¬º'] = (4, 6, -6, [0b10001010, 0b01001010, 0b00110001]) # vulgar fraction one quarter
struct['¬Ω'] = (4, 7, -6, [0b10001010, 0b01001011, 0b00010010, 0b00110000]) # vulgar fraction one half
struct['¬æ'] = (6, 6, -6, [0b11000001, 0b00001101, 0b00001010, 0b01001100, 0b00010000]) # vulgar fraction three quarters
struct['√Ä'] = (3, 6, -6, [0b10001010, 0b11111011, 0b01000000]) # A with grave
struct['√Å'] = (3, 6, -6, [0b00101010, 0b11111011, 0b01000000]) # A with acute
struct['√Ç'] = (3, 6, -6, [0b01010101, 0b01011111, 0b01000000]) # A with circumflex
struct['√É'] = (3, 6, -6, [0b11101010, 0b11111011, 0b01000000]) # A with tilde
struct['√Ñ'] = (3, 6, -6, [0b10101010, 0b11111011, 0b01000000]) # A with diaeresis
struct['√Ö'] = (3, 6, -6, [0b01010101, 0b01011111, 0b01000000]) # A with ring above
struct['√Ü'] = (4, 5, -5, [0b01111010, 0b11111010, 0b10110000]) # AE ligature
struct['√á'] = (3, 6, -5, [0b01110010, 0b01000110, 0b10000000]) # C with cedilla
struct['√à'] = (3, 6, -6, [0b10011110, 0b01111001, 0b11000000]) # E with grave
struct['√â'] = (3, 6, -6, [0b00111110, 0b01111001, 0b11000000]) # E with acute
struct['√ä'] = (3, 6, -6, [0b01010111, 0b11101001, 0b11000000]) # E with circumflex
struct['√ã'] = (3, 6, -6, [0b10100011, 0b11101001, 0b11000000]) # E with diaeresis
struct['√å'] = (3, 6, -6, [0b10001011, 0b10100101, 0b11000000]) # I with grave
struct['√ç'] = (3, 6, -6, [0b00101011, 0b10100101, 0b11000000]) # I with acute
struct['√é'] = (3, 6, -6, [0b01010100, 0b01110101, 0b11000000]) # I with circum
struct['√è'] = (3, 6, -6, [0b10100011, 0b10100101, 0b11000000]) # I with diaeresis
struct['√ë'] = (3, 6, -6, [0b11100011, 0b01011011, 0b01000000]) # N with tilde
struct['√í'] = (3, 6, -6, [0b10001011, 0b11011011, 0b11000000]) # O with grave
struct['√ì'] = (3, 6, -6, [0b00101011, 0b11011011, 0b11000000]) # O with acute
struct['√î'] = (3, 6, -6, [0b01010100, 0b01111011, 0b11000000]) # O with circumflex
struct['√ï'] = (3, 6, -6, [0b11100011, 0b11011011, 0b11000000]) # O with tilde
struct['√ñ'] = (3, 6, -6, [0b10100011, 0b11011011, 0b11000000]) # O with diaeresis
struct['√ô'] = (3, 6, -6, [0b10001000, 0b01011010, 0b11000000]) # U with grave
struct['√ö'] = (3, 6, -6, [0b00101000, 0b01011010, 0b11000000]) # U with acute
struct['√õ'] = (3, 6, -6, [0b01010100, 0b01011010, 0b11000000]) # U with circumflex
struct['√ú'] = (3, 6, -6, [0b10100010, 0b11011010, 0b11000000]) # U with diaeresis
struct['√ù'] = (3, 6, -6, [0b00101000, 0b01010100, 0b10000000]) # Y with acute

struct['√†'] = (3, 6, -6, [0b10001011, 0b00011110, 0b11000000]) # a with grave
struct['√°'] = (3, 6, -6, [0b00101011, 0b00011110, 0b11000000]) # a with acute
struct['√¢'] = (3, 6, -6, [0b01010111, 0b00011110, 0b11000000]) # a with circumflex
struct['√£'] = (3, 6, -6, [0b11100011, 0b00011110, 0b11000000]) # a with tilde
struct['√§'] = (3, 6, -6, [0b10100011, 0b00011110, 0b11000000]) # a with diaeresis
struct['√•'] = (3, 6, -6, [0b01010101, 0b01110110, 0b11000000]) # a with ring above
struct['√¶'] = (4, 4, -4, [0b11110011, 0b11001111]) # ae ligature
struct['√ß'] = (3, 5, -4, [0b01110010, 0b00110100]) # c with cedilla
struct['√®'] = (3, 6, -6, [0b10001001, 0b11111000, 0b11000000]) # e with grave
struct['√©'] = (3, 6, -6, [0b00101001, 0b11111000, 0b11000000]) # e with acute
struct['√™'] = (3, 6, -6, [0b01010101, 0b11111000, 0b11000000]) # e with circumflex
struct['√´'] = (3, 6, -6, [0b10100001, 0b11111000, 0b11000000]) # e with diaeresis
struct['√¨'] = (2, 6, -6, [0b10010001, 0b01010000]) # i with grave
struct['√≠'] = (2, 6, -6, [0b01100010, 0b10100000]) # i with acute
struct['√Æ'] = (3, 6, -6, [0b01010100, 0b00100100, 0b10000000]) # i with circumflex
struct['√±'] = (3, 6, -6, [0b11100011, 0b01011011, 0b01000000]) # n with tilde
struct['√≤'] = (3, 6, -6, [0b10001000, 0b01111011, 0b11000000]) # o with grave
struct['√≥'] = (3, 6, -6, [0b00101000, 0b01111011, 0b11000000]) # o with acute
struct['√¥'] = (3, 6, -6, [0b01010100, 0b01111011, 0b11000000]) # o with circumflex
struct['√µ'] = (3, 6, -6, [0b11100011, 0b11011011, 0b11000000]) # o with tilde
struct['√∂'] = (3, 6, -6, [0b10100011, 0b11011011, 0b11000000]) # o with diaeresis
struct['√π'] = (3, 6, -6, [0b10001000, 0b01011010, 0b11000000]) # u with grave
struct['√∫'] = (3, 6, -6, [0b00101000, 0b01011010, 0b11000000]) # u with acute
struct['√ª'] = (3, 6, -6, [0b01010100, 0b01011010, 0b11000000]) # u with circumflex
struct['√º'] = (3, 6, -6, [0b10100010, 0b11011010, 0b11000000]) # u with diaeresis
struct['√Ω'] = (3, 7, -6, [0b00101000, 0b01010110, 0b01011000]) # y with acute
struct['√ø'] = (3, 7, -6, [0b10100010, 0b11010110, 0b01011000]) # y with diaeresis
struct['ƒÄ'] = (3, 6, -6, [0b11100001, 0b01011111, 0b01000000]) # A with macron
struct['ƒÅ'] = (3, 6, -6, [0b11100011, 0b00011110, 0b11000000]) # a with macron
struct['ƒÇ'] = (3, 6, -6, [0b10101001, 0b01011111, 0b01000000]) # A with breve
struct['ƒÉ'] = (3, 6, -6, [0b10101011, 0b00011110, 0b11000000]) # a with breve
struct['ƒÑ'] = (3, 6, -5, [0b01010111, 0b11011010, 0b01000000]) # A with ogonek
struct['ƒÖ'] = (3, 5, -4, [0b11000111, 0b10110010]) # a with ogonek
struct['ƒÜ'] = (3, 6, -6, [0b00101001, 0b11001000, 0b11000000]) # C with acute
struct['ƒá'] = (3, 6, -6, [0b00101000, 0b00111000, 0b11000000]) # c with acute
struct['ƒà'] = (3, 6, -6, [0b01010101, 0b11001000, 0b11000000]) # C with circumflex
struct['ƒâ'] = (3, 6, -6, [0b01010100, 0b00111000, 0b11000000]) # c with circumflex
struct['ƒä'] = (3, 6, -6, [0b01000001, 0b11001000, 0b11000000]) # C with dot above
struct['ƒã'] = (3, 6, -6, [0b01000001, 0b11001000, 0b11000000]) # c with dot above
struct['ƒå'] = (3, 6, -6, [0b10101001, 0b11001000, 0b11000000]) # C with caron
struct['ƒç'] = (3, 6, -6, [0b10101000, 0b00111000, 0b11000000]) # c with caron
struct['ƒé'] = (3, 6, -6, [0b10101011, 0b01011011, 0b10000000]) # D with caron
struct['ƒè'] = (4, 5, -5, [0b01010101, 0b11001100, 0b11000000]) # d with caron
struct['ƒê'] = (4, 5, -5, [0b01100101, 0b11010101, 0b01100000]) # D with stroke
struct['ƒë'] = (4, 5, -5, [0b00100011, 0b01101010, 0b01100000]) # d with stroke
struct['ƒí'] = (3, 6, -6, [0b11100011, 0b11101001, 0b11000000]) # E with macron
struct['ƒì'] = (3, 6, -6, [0b11100001, 0b11111000, 0b11000000]) # e with macron
struct['ƒî'] = (3, 6, -6, [0b10101011, 0b11101001, 0b11000000]) # E with breve
struct['ƒï'] = (3, 6, -6, [0b10101001, 0b11111000, 0b11000000]) # e with breve
struct['ƒñ'] = (3, 6, -6, [0b01000011, 0b11101001, 0b11000000]) # E with dot above
struct['ƒó'] = (3, 6, -6, [0b01000001, 0b11111000, 0b11000000]) # e with dot above
struct['ƒò'] = (3, 6, -5, [0b11110011, 0b01001110, 0b10000000]) # E with ogonek
struct['ƒô'] = (3, 5, -4, [0b01111110, 0b00110100]) # e with ogonek
struct['ƒö'] = (3, 6, -6, [0b10101011, 0b11101001, 0b11000000]) # E with caron
struct['ƒõ'] = (3, 6, -6, [0b10101001, 0b11111000, 0b11000000]) # e with caron
struct['ƒú'] = (3, 6, -6, [0b01010101, 0b11001010, 0b11000000]) # G with circumflex
struct['ƒù'] = (3, 7, -6, [0b01010100, 0b00111110, 0b01011000]) # g with circumflex
struct['ƒû'] = (3, 6, -6, [0b10101001, 0b11001010, 0b11000000]) # G with breve
struct['ƒü'] = (3, 7, -6, [0b10101000, 0b00111110, 0b01011000]) # g with breve
struct['ƒ†'] = (3, 6, -6, [0b01000001, 0b11001010, 0b11000000]) # G with dot above
struct['ƒ°'] = (3, 7, -6, [0b01000001, 0b11011110, 0b01011000]) # g with dot above
struct['ƒ¢'] = (3, 6, -5, [0b01110010, 0b11010110, 0b10000000]) # G with cedilla
struct['ƒ£'] = (3, 7, -6, [0b00101000, 0b00111110, 0b01011000]) # g with cedilla
struct['ƒ§'] = (3, 6, -6, [0b01010100, 0b01011111, 0b01000000]) # H with circumflex
struct['ƒ•'] = (3, 6, -6, [0b01010100, 0b01001101, 0b01000000]) # h with circumflex
struct['ƒ®'] = (3, 6, -6, [0b11100011, 0b10100101, 0b11000000]) # I with tilde
struct['ƒ©'] = (3, 5, -5, [0b11100001, 0b00101000]) # i with tilde
struct['ƒ™'] = (3, 6, -6, [0b11100011, 0b10100101, 0b11000000]) # I with macron
struct['ƒ´'] = (3, 6, -6, [0b11100001, 0b00101000, 0b11000000]) # i with macron
struct['ƒ¨'] = (3, 6, -6, [0b10101000, 0b01110101, 0b11000000]) # I with breve
struct['ƒ≠'] = (3, 6, -6, [0b10101000, 0b00100100, 0b10000000]) # i with breve
struct['ƒÆ'] = (3, 6, -5, [0b11101001, 0b00101110, 0b10000000]) # I with ogonek
struct['ƒØ'] = (1, 6, -5, [0b10111100]) # i with ogonek
struct['ƒ∞'] = (3, 6, -6, [0b01000011, 0b10100101, 0b11000000]) # I with dot above
struct['ƒ≤'] = (4, 5, -5, [0b10011001, 0b10011001, 0b10100000]) # IJ ligature
struct['ƒ≥'] = (4, 6, -5, [0b10010000, 0b10011001, 0b10010010]) # ij ligature
struct['ƒ¥'] = (3, 6, -6, [0b01010100, 0b00011010, 0b10000000]) # J with circumflex
struct['ƒµ'] = (3, 7, -6, [0b01010100, 0b00100100, 0b10100000]) # j with circumflex
struct['ƒ∂'] = (3, 6, -5, [0b10110111, 0b01011010, 0b10000000]) # K with cedilla
struct['ƒ∑'] = (3, 6, -5, [0b10010010, 0b11101010, 0b10000000]) # k with cedilla
struct['ƒπ'] = (3, 6, -6, [0b00101000, 0b01001001, 0b11000000]) # L with acute
struct['ƒ∫'] = (2, 6, -6, [0b01100010, 0b10010000]) # l with acute
struct['ƒª'] = (3, 6, -5, [0b10010010, 0b01001110, 0b10000000]) # L with cedilla
struct['ƒº'] = (2, 6, -5, [0b10101010, 0b01100000]) # l with cedilla
struct['ƒΩ'] = (3, 6, -6, [0b00110110, 0b01001001, 0b11000000]) # L with caron
struct['ƒæ'] = (3, 6, -6, [0b00110110, 0b01001000, 0b10000000]) # l with caron
struct['≈Å'] = (4, 5, -5, [0b01000110, 0b11000100, 0b01110000]) # L with stroke
struct['≈Ç'] = (3, 5, -5, [0b01001111, 0b00100010]) # l with stroke
struct['≈É'] = (3, 6, -6, [0b00101011, 0b01011011, 0b01000000]) # N with acute
struct['≈Ñ'] = (3, 6, -6, [0b00101000, 0b01101011, 0b01000000]) # n with acute
struct['≈Ö'] = (3, 6, -5, [0b11010110, 0b11011010, 0b10000000]) # N with cedilla
struct['≈Ü'] = (3, 5, -4, [0b11010110, 0b11010100]) # n with cedilla
struct['≈á'] = (3, 6, -6, [0b10101011, 0b01011011, 0b01000000]) # N with caron
struct['≈à'] = (3, 6, -6, [0b10101000, 0b01101011, 0b01000000]) # n with caron
struct['≈â'] = (4, 6, -6, [0b10001000, 0b01100101, 0b01010101]) # n apostrophe
struct['≈ä'] = (3, 6, -5, [0b11010110, 0b11011010, 0b01000000]) # Eng
struct['≈ã'] = (3, 5, -4, [0b11010110, 0b11010100]) # eng
struct['≈å'] = (3, 6, -6, [0b11100011, 0b11011011, 0b11000000]) # O with macron
struct['≈ç'] = (3, 6, -6, [0b11100011, 0b11011011, 0b11000000]) # o with macron
struct['≈é'] = (3, 6, -6, [0b10101011, 0b11011011, 0b11000000]) # O with breve
struct['≈è'] = (3, 6, -6, [0b10101000, 0b01111011, 0b11000000]) # o with breve
struct['≈ê'] = (3, 6, -6, [0b10100011, 0b11011011, 0b11000000]) # O with double acute
struct['≈ë'] = (3, 6, -6, [0b10100011, 0b11011011, 0b11000000]) # o with double acute
struct['≈í'] = (4, 5, -5, [0b01111010, 0b10111010, 0b01110000]) # OE ligature
struct['≈ì'] = (4, 4, -4, [0b01111011, 0b10100111]) # oe ligature
struct['≈î'] = (3, 6, -6, [0b00101011, 0b01011101, 0b01000000]) # R with acute
struct['≈ï'] = (3, 6, -6, [0b00101000, 0b00111001, 0b00000000]) # r with acute
struct['≈ñ'] = (3, 6, -5, [0b11010111, 0b01011010, 0b10000000]) # R with cedilla
struct['≈ó'] = (3, 5, -4, [0b01110010, 0b01000100]) # r with cedilla
struct['≈ò'] = (3, 6, -6, [0b10101011, 0b01011101, 0b01000000]) # R with caron
struct['≈ô'] = (3, 6, -6, [0b10101000, 0b00111001, 0b00000000]) # r with car
struct['≈ö'] = (3, 6, -6, [0b00101001, 0b11100011, 0b10000000]) # S with acute
struct['≈õ'] = (3, 6, -6, [0b00101001, 0b11100011, 0b10000000]) # s with acute
struct['≈ú'] = (3, 6, -6, [0b01010101, 0b11100011, 0b10000000]) # S with circumflex
struct['≈ù'] = (3, 6, -6, [0b01010101, 0b11100011, 0b10000000]) # s with circum
struct['≈û'] = (3, 6, -5, [0b01110001, 0b00011100, 0b10000000]) # S with cedilla
struct['≈ü'] = (3, 5, -4, [0b01111000, 0b11100100]) # s with cedilla
struct['≈†'] = (3, 6, -6, [0b10101001, 0b11100011, 0b10000000]) # S with acute
struct['≈°'] = (3, 6, -6, [0b10101001, 0b11100011, 0b10000000]) # s with acute
struct['≈¢'] = (3, 6, -5, [0b11101001, 0b00100100, 0b10000000]) # T with cedilla
struct['≈£'] = (3, 6, -5, [0b01011101, 0b00100010, 0b10000000]) # t with cedilla
struct['≈§'] = (3, 6, -6, [0b10101011, 0b10100100, 0b10000000]) # T with caron
struct['≈•'] = (4, 6, -6, [0b00010101, 0b11100100, 0b01000010]) # t with caron   ----! make move right only 4 pixels
struct['≈®'] = (3, 6, -6, [0b11100010, 0b11011010, 0b11000000]) # U with tilde
struct['≈©'] = (3, 6, -6, [0b11100010, 0b11011010, 0b11000000]) # u with tilde
struct['≈™'] = (3, 6, -6, [0b11100010, 0b11011010, 0b11000000]) # U with macron
struct['≈´'] = (3, 6, -6, [0b11100010, 0b11011010, 0b11000000]) # u with macron
struct['≈¨'] = (3, 6, -6, [0b10101000, 0b01011010, 0b11000000]) # U with breve
struct['≈≠'] = (3, 6, -6, [0b10101000, 0b01011010, 0b11000000]) # u with breve
struct['≈Æ'] = (3, 6, -6, [0b01010101, 0b01011010, 0b11000000]) # U with ring above
struct['≈Ø'] = (3, 6, -6, [0b01010101, 0b00001010, 0b11000000]) # u with ring
struct['≈∞'] = (3, 6, -6, [0b10100010, 0b11011010, 0b11000000]) # U with double acute
struct['≈±'] = (3, 6, -6, [0b10100010, 0b11011010, 0b11000000]) # u with double acute
struct['≈≤'] = (3, 6, -5, [0b10110110, 0b11010110, 0b10000000]) # U with ogonek
struct['≈≥'] = (3, 5, -4, [0b10110110, 0b10110100]) # u with ogonek
struct['≈¥'] = (3, 6, -6, [0b01010100, 0b01011111, 0b11000000]) # W with circumflex
struct['≈µ'] = (3, 6, -6, [0b01010100, 0b01011111, 0b11000000]) # w with circum
struct['≈∂'] = (3, 6, -6, [0b01010100, 0b01010100, 0b10000000]) # Y with circumflex
struct['≈∑'] = (3, 7, -6, [0b01010100, 0b01010110, 0b01011000]) # y with circum
struct['≈∏'] = (3, 6, -6, [0b10100010, 0b11010100, 0b10000000]) # Y with diaeresis
struct['≈π'] = (3, 6, -6, [0b00101011, 0b10010101, 0b11000000]) # Z with acute
struct['≈∫'] = (3, 6, -6, [0b00101011, 0b10010101, 0b11000000]) # z with acute
struct['≈ª'] = (3, 6, -6, [0b01000011, 0b10010101, 0b11000000]) # Z with dot above
struct['≈º'] = (3, 6, -6, [0b01000011, 0b10010101, 0b11000000]) # z with dot above
struct['≈Ω'] = (3, 6, -6, [0b10101011, 0b10010101, 0b11000000]) # Z with caron
struct['≈æ'] = (3, 6, -6, [0b10101011, 0b10010101, 0b11000000]) # z with caron

struct['–î'] = (3, 6, -5, [0b01110110, 0b11011111, 0b01000000]) # Cyrillic De
struct['–ñ'] = (5, 5, -5, [0b10101101, 0b01011101, 0b01011010, 0b10000000]) # Cyrillic Zhe
struct['–¶'] = (4, 6, -5, [0b10101010, 0b10101010, 0b11110001]) # Cyrillic Tse
struct['–©'] = (4, 6, -5, [0b10101110, 0b11101110, 0b11110001]) # Cyrillic Shcha
struct['–Æ'] = (4, 5, -5, [0b10101101, 0b11011101, 0b10100000]) # Cyrillic Yu
struct['–¥'] = (3, 5, -4, [0b01110110, 0b11111010]) # Cyrillic de
struct['–∂'] = (5, 4, -4, [0b10101011, 0b10011101, 0b01010000]) # Cyrillic zhe
struct['—Ü'] = (4, 5, -4, [0b10101010, 0b10101111, 0b00010000]) # Cyrillic tse
struct['—â'] = (4, 5, -4, [0b10101110, 0b11101111, 0b00010000]) # Cyrillic shcha
struct['—é'] = (4, 4, -4, [0b10101101, 0b11011010]) # Cyrillic yu
struct['—ì'] = (3, 6, -6, [0b00101000, 0b01111001, 0b00100000]) # Cyrillic gje
struct['—ô'] = (4, 4, -4, [0b01100110, 0b10111011]) # Cyrillic lje
struct['—ö'] = (4, 4, -4, [0b10101110, 0b10111011]) # Cyrillic nje
struct['—ú'] = (3, 6, -6, [0b00101000, 0b01011101, 0b01000000]) # Cyrillic kje
struct['—ù'] = (3, 6, -6, [0b10001000, 0b01011111, 0b01000000]) # Cyrillic i with grave
struct['—û'] = (3, 7, -6, [0b10101000, 0b01010110, 0b01011000]) # Cyrillic short u
struct['—ü'] = (3, 5, -4, [0b10110110, 0b11110100]) # Cyrillic dzhe
struct['–ô'] = (3, 6, -6, [0b10101010, 0b11111011, 0b01000000]) # Cyrillic short I
struct['–π'] = (3, 6, -6, [0b10101000, 0b01011111, 0b01000000]) # Cyrillic short i

struct['‚Ä¶'] = (5, 1, -1, [0b10101000]) # ellipsis
struct['‚Ä∞'] = (4, 5, -5, [0b10000010, 0b01001000, 0b00110000]) # per mille sign
struct['‚Ä±'] = (5, 5, -5, [0b10000001, 0b00010001, 0b00000011, 0b10000000]) # basis point sign
struct['‚Ä¥'] = (5, 2, -5, [0b11001100, 0b11000000]) # triple prime
struct['‚Ä∑'] = (5, 2, -5, [0b11001100, 0b11000000]) # quintuple prime
struct['‚Åá'] = (5, 5, -5, [0b10010010, 0b01100100, 0b00001001, 0b00000000]) # double question mark
struct['‚Åà'] = (4, 5, -5, [0b10010101, 0b10010000, 0b10010000]) # question exclamation mark
struct['‚Åâ'] = (4, 5, -5, [0b10101001, 0b10100000, 0b10100000]) # exclamation question mark
struct['‚Åë'] = (3, 7, -6, [0b10101010, 0b10001010, 0b10101000]) # asterism
struct['‚Åì'] = (4, 2, -3, [0b01011010]) # swung dash
struct['‚Åó'] = (7, 2, -5, [0b10101011, 0b01010100]) # quadruple prime

struct['üá∂'] = (3, 6, -5, [0b11110110, 0b11011110, 0b01000000])

f3x5fixed = {}

# bitmap size before implementing optimizations: 1116 bytes

offset = 0
adafruit_print_bitmap = list()
adafruit_print_bitmap_minus_offset = 0
processed = set()

def all_processed():
    """ check if all characters have been processed """
    ret = True
    for key in struct.keys():
        if key not in processed:
            ret = False
            break
    return ret

def find_widest():
    """ find the character with the widest bitmap (width * height) that has not been processed yet """
    max_width = -1
    widest_key = None
    for key in struct.keys():
        if key in processed:
            continue
        width, height, yOffset, adafruit_bitmap = struct[key]
        if width * height > max_width:
            max_width = width * height
            widest_key = key
    return widest_key

# optimization #1:
def find_widest_already_in_bitmap():
    """ find an unprocessed character with the widest bitmap (width * height) that is already in the bitmap """
    max_width = -1
    boffset = -1
    widest_key = None
    for key in struct.keys():
        if key in processed:
            continue
        width, height, yOffset, adafruit_bitmap = struct[key]
        bits = width * height
        for i in range(len(adafruit_print_bitmap)):
            found = True
            for j in range(bits):
                if j % 8 == 0:
                    char_checked_byte_index = j // 8
                    char_checked_byte = adafruit_bitmap[char_checked_byte_index]
                    output_checked_byte_index = i + char_checked_byte_index
                    if output_checked_byte_index + 1 > len(adafruit_print_bitmap):
                        found = False
                        break
                    output_checked_byte = adafruit_print_bitmap[output_checked_byte_index]
                char_checked_bit = (char_checked_byte >> (7 - (j % 8))) & 1
                output_checked_bit = (output_checked_byte >> (7 - (j % 8))) & 1
                if char_checked_bit != output_checked_bit:
                    found = False
                    break
            if found:
                if width > max_width:
                    max_width = width
                    widest_key = key
                    boffset = i
                break
    return widest_key, boffset

# optimization #2:
def find_starting_with():
    """ find an unprocessed character that starts with the end of the current bitmap """
    overlap_width = -1
    boffset = -1
    widest_key = None
    for key in struct.keys():
        if key in processed:
            continue
        width, height, yOffset, adafruit_bitmap = struct[key]
        for i in range(len(adafruit_bitmap) - 1, 0, -1):
            found = True
            bitmap_start = len(adafruit_print_bitmap) - i
            if bitmap_start < 0:
                continue
            for j in range(i * 8):
                if j % 8 == 0:
                    char_checked_byte_index = j // 8
                    char_checked_byte = adafruit_bitmap[char_checked_byte_index]
                    output_checked_byte_index = bitmap_start + char_checked_byte_index
                    if output_checked_byte_index + 1 > len(adafruit_print_bitmap):
                        found = False
                        break
                    output_checked_byte = adafruit_print_bitmap[output_checked_byte_index]
                char_checked_bit = (char_checked_byte >> (7 - (j % 8))) & 1
                output_checked_bit = (output_checked_byte >> (7 - (j % 8))) & 1
                if char_checked_bit != output_checked_bit:
                    found = False
                    break
            if found:
                if i > overlap_width:
                    overlap_width = i
                    widest_key = key
                    boffset = bitmap_start
                break
    return widest_key, boffset, overlap_width

# optimization #3:
def find_ending_with():
    """ find an unprocessed character that ends with the start of the current bitmap """
    overlap_width = -1
    widest_key = None
    for key in struct.keys():
        if key in processed:
            continue
        width, height, yOffset, adafruit_bitmap = struct[key]
        for i in range(len(adafruit_bitmap) - 1, 0, -1):
            found = True
            last_byte_bits = (width * height) % 8 if (width * height) % 8 != 0 else 8
            for j in range((i - 1) * 8 + last_byte_bits):
                if j % 8 == 0:
                    char_checked_byte_index = len(adafruit_bitmap) - (j // 8) - 1
                    char_checked_byte = adafruit_bitmap[char_checked_byte_index]
                    output_checked_byte_index = i - (j // 8) - 1
                    if output_checked_byte_index + 1 > len(adafruit_print_bitmap):
                        found = False
                        break
                    output_checked_byte = adafruit_print_bitmap[output_checked_byte_index]
                char_checked_bit = (char_checked_byte >> (7 - (j % 8))) & 1
                output_checked_bit = (output_checked_byte >> (7 - (j % 8))) & 1
                if char_checked_bit != output_checked_bit:
                    found = False
                    break
            if found:
                if i > overlap_width:
                    overlap_width = i
                    widest_key = key
                break
    return widest_key, overlap_width

# bitmap size after implementing optimizations: 636 bytes, saving of 43 %

void = None
while not all_processed():

    key, boffset = find_widest_already_in_bitmap()
    if key is not None:
        eprint(f"Found existing bitmap for character {key!r} at offset {boffset}")

    boffset += adafruit_print_bitmap_minus_offset

    if key is None:
        key, overlap_width = find_ending_with()
        if overlap_width > 0:
            eprint(f"Found ending overlap of {overlap_width} byte(s) for character {key!r}")
            width, height, yOffset, adafruit_bitmap = struct[key]
            for i in range(len(adafruit_bitmap) - overlap_width, 0, -1):
                adafruit_print_bitmap.insert(0, adafruit_bitmap[i - 1])
                adafruit_print_bitmap_minus_offset -= 1
            boffset = adafruit_print_bitmap_minus_offset

    if key is None:
        key, boffset, overlap_width = find_starting_with()
        boffset += adafruit_print_bitmap_minus_offset
        if overlap_width > 0:
            eprint(f"Found starting overlap of {overlap_width} byte(s) for character {key!r}")
            width, height, yOffset, adafruit_bitmap = struct[key]
            for i in range(len(adafruit_bitmap) - overlap_width):
                adafruit_print_bitmap.append(adafruit_bitmap[overlap_width + i])
                offset += 1

    if key is None:
        key = find_widest()
        boffset = offset
        width, height, yOffset, adafruit_bitmap = struct[key]
        for i in range(len(adafruit_bitmap)):
            adafruit_print_bitmap.append(adafruit_bitmap[i])
            offset += 1

    width, height, yOffset, adafruit_bitmap = struct[key]
    struct[key] = (width, height, yOffset, adafruit_bitmap, boffset)
    processed.add(key)

# eprint("Final adafruit_print_bitmap: ", adafruit_print_bitmap)
# eprint('adafruit_print_bitmap_minus_offset:', adafruit_print_bitmap_minus_offset)

# ---- Start of output ----
print("#pragma once\n")
print("#include <Arduino.h>")
print("#include <utf832bitfont.h>\n")

# ---- Generate Adafruit bitmap ----

print("const uint8_t F3x5Bitmaps[] PROGMEM = {")
for i in range(len(adafruit_print_bitmap)):
    if i % 8 == 0:
        print("    ", end="")
    print(f"0b{adafruit_print_bitmap[i]:08b}, ", end="")
    if i % 8 == 7:
        print(f"  // {i - 7} to {i}")
if len(adafruit_print_bitmap) % 8 != 0:
    print(f"  // {len(adafruit_print_bitmap) - (len(adafruit_print_bitmap) % 8)} to {len(adafruit_print_bitmap) - 1}"   )
print("};\n")

# ---- Generate Glyphs ----

def glyph_groups(struct):
    start = 1
    for key, value in struct.items():
        if start == 1:
            first_key = key
            start = 0
        elif ord(key) != ord(last_key) + 1:
            yield (first_key, last_key)
            first_key = key
        last_key = key
    yield (first_key, last_key)

i = 0
groups = list(glyph_groups(struct))
bitmap_foffset = {}
print(f"const GFXglyph F3x5Glyphs[] PROGMEM = {{")
for first_char, last_char in groups:
    bitmap_foffset[first_char] = i
    for c in range(ord(first_char), ord(last_char) + 1):
        key = chr(c)
        width, height, yOffset, adafruit_bitmap, offset = struct[key]
        print(f"    {{ {offset - adafruit_print_bitmap_minus_offset:>3}, {width}, {height}, {width+1}, {0}, {yOffset} }},   // {key!r}")
        i += 1
print("};\n")

print(f"const UTF8_32BitFont F3x5[] PROGMEM = {{")

for first_char, last_char in groups:
    print("    {")
    print("        (uint8_t  *) F3x5Bitmaps,")
    print(f"        (GFXglyph *) &F3x5Glyphs[{bitmap_foffset[first_char]}],")
    print(f"        {ord(first_char) if ord(first_char) <= 65535 else 0}, {ord(last_char) if ord(last_char) <= 65535 else 0}, {HEIGHT+1},")
    print(f"        {ord(first_char) if ord(first_char) > 65535 else 0}, {ord(last_char) if ord(last_char) > 65535 else 0}")
    print("    },")

print("    {nullptr, nullptr, 0, 0, 0, 0, 0}")  # End marker
print("};\n")

# ---- Generate Fixed Glyphs ----

print("const GFXglyph F3x5Glyphs_Fixed[] PROGMEM = {")
for i in range(ord('-'), ord(':') + 1):
    key = chr(i)
    width, height, yOffset, adafruit_bitmap, offset = struct[key]
    if key == '.':
        print(f"    {{   0, 0, 0, 0, 0,  0 }},   // {key!r}")
    elif key == '/':
        X = struct['X']
        print(f"    {{ {X[4] - adafruit_print_bitmap_minus_offset:>3}, {X[0]}, {X[1]}, {X[0]+1}, 0, {X[2]} }},   // To save space in the font, 'X' bitmap mapped to '/' character")
    elif key == 'X':
        pass
    elif key == '-':
        print(f"    {{ {offset - adafruit_print_bitmap_minus_offset:>3}, {width}, {height}, 4, 1, {yOffset} }},   // {key!r}")
    elif key == ':':
        print(f"    {{ {offset - adafruit_print_bitmap_minus_offset:>3}, {width}, {height}, 4, 1, {yOffset} }},   // {key!r}")
    else:
        print(f"    {{ {offset - adafruit_print_bitmap_minus_offset:>3}, {width}, {height}, {width+1}, {0}, {yOffset} }},   // {key!r}")
print("};\n")
print("const GFXfont F3x5_Fixed PROGMEM = {")
print("    (uint8_t  *) F3x5Bitmaps,")
print("    (GFXglyph *) F3x5Glyphs_Fixed,")
print(f"    {ord('-')}, {ord(':')}, {HEIGHT+1}")
print("};")


